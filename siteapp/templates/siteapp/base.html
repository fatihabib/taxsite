{% load static %}
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{% block title %}Tax Automation{% endblock %}</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Font Awesome -->

    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'siteapp/images/tax10.jpg' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'siteapp/images/tax10.jpg' %}">





    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'siteapp/css/styles.css' %}">
</head>

<body>
    <!-- <header class="site-header">
        <div class="container">
            <h1 class="brand">Tax Automation</h1>
            <nav class="nav">
                <a href="{% url 'index' %}" class="back-link">Home</a>
                <a href="#learn" class="btn btn-outline">contact us</a>
            </nav>
        </div>
    </header> -->
    <header class="site-header">
        <div class="container">
            <!-- Brand / Logo -->
            <h1 class="brand">
                <a href="{% url 'index' %}">

                    <span class="brand-gradient">Tax</span> Automation
                </a>
            </h1>

            <!-- Navigation -->
            <nav class="nav" id="nav-menu">
                <a href="{% url 'index' %}" class="btn btn-header">Home</a>
                <a href="#events" class="btn btn-header">Events</a>
                <a href="#learn" class="btn btn-header">Learn</a>
                <a href="#contact" class="btn btn-header">Contact</a>
            </nav>

            <!-- Hamburger Menu -->
            <button class="nav-toggle" id="nav-toggle">
            <i class="fa-solid fa-bars"></i>
        </button>
        </div>
    </header>


    <main>
        {% block content %}{% endblock %}
    </main>
    <!-- Contact Section -->
    <section id="contact" class="contact-wrapper">
        <div class="contact-card">

            <!-- Heading -->
            <h2 class="contact-wrapper-title">Contact Us</h2>
            <p class="contact-wrapper-subtitle">We'd love to hear from you. Fill out the form below or reach us directly!</p>

            <!-- Google Map -->
            <div class="map-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3971.382845841449!2d7.471268075886851!3d9.05707199294803!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x105ffb7b4f2d85f5%3A0x460c1b3d8050c4d3!2sAbuja%2C%20Nigeria!5e0!3m2!1sen!2sus!4v1700000000000!5m2!1sen!2sus"
                    allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
      </iframe>
            </div>

            <!-- Contact Details -->
            <div class="contact-info">
                <p class="contact-wrapper-info"><strong>üìç Main Office:</strong> Abuja, Nigeria</p>
                <p class="contact-wrapper-info"><strong>üìß Email:</strong> info@taxautomation.com</p>
                <p class="contact-wrapper-info"><strong>üìû Phone:</strong> +234 800 123 4567</p>
                <p class="contact-wrapper-info"><strong>‚è∞ Working Hours:</strong> Mon ‚Äì Fri, 9:00 AM ‚Äì 5:00 PM</p>
            </div>

            <!-- Contact Form -->
            <form id="contactForm" method="post">
                {% csrf_token %}
                <input type="text" name="name" placeholder="Your Name" required>
                <input type="email" name="email" placeholder="Your Email" required>
                <textarea name="message" placeholder="Your Message" required></textarea>
                <button type="submit" class="send-btn">Send Message</button>
            </form>

            <!-- Social Links -->
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-linkedin-in"></i></a>
            </div>

            <!-- Success Popup -->
            <div id="successPopup" class="popup">
                <div class="popup-content">
                    <span class="close-btn" onclick="closePopup()">&times;</span>
                    <h3 class="contact-wrapper-popup-title">‚úÖ Email Sent!</h3>
                    <p class="contact-wrapper-popup-text">Your message has been sent successfully. We‚Äôll get back to you soon.</p>
                </div>
            </div>

        </div>
    </section>


    <script>
        document.getElementById("contactForm").addEventListener("submit", async function(e) {
            e.preventDefault();

            let form = e.target;
            let formData = new FormData(form);

            try {
                let response = await fetch("{% url 'contact' %}", {
                    method: "POST",
                    body: formData,
                    headers: {
                        "X-Requested-With": "XMLHttpRequest"
                    }
                });

                let data = await response.json();

                if (data.status === "success") {
                    form.reset(); // clear form
                    openPopup(data.message || "Your message has been sent successfully!");
                } else {
                    alert(data.message || "Something went wrong. Please try again.");
                }
            } catch (err) {
                console.error(err);
                alert("Network error. Please try again later.");
            }
        });

        // Popup functions
        function openPopup(message) {
            const popup = document.getElementById("successPopup");
            popup.querySelector(".contact-wrapper-popup-text").innerText = message;
            popup.style.display = "flex";

            // Auto close after 4 seconds
            clearTimeout(popup.timeoutId); // prevent overlapping timers
            popup.timeoutId = setTimeout(closePopup, 4000);
        }

        function closePopup() {
            const popup = document.getElementById("successPopup");
            popup.style.display = "none";
            if (popup.timeoutId) clearTimeout(popup.timeoutId);
        }
    </script>

    <script>
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.getElementById('nav-menu');
        const header = document.querySelector('.site-header');

        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });

        // Shrink header on scroll
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                header.classList.add('shrink');
            } else {
                header.classList.remove('shrink');
            }
        });
    </script>

</body>

</html>